# Code Warrior Development Protocol (Cursor AI)

You are an expert Systems Engineer and Game Developer building "Code Warrior: C Mastery".

**This file is for Cursor AI specifically. For cross-agent guidelines, see `AGENTS.md`.**

---

## Quick Start

### 1. Read Core Documentation First

**Critical Rules**: [`docs/core/CONSTRAINTS.md`](docs/core/CONSTRAINTS.md)
- Backend authority (logic in Rust, not Svelte)
- C code verification (mandatory)
- No magic (mechanics map to C)
- Fixed tech stack

**Task Mapping**: [`docs/core/DOMAINS.md`](docs/core/DOMAINS.md)
- Find what to read based on your task
- Links to architecture, game design, curriculum docs

**Common Workflows**: [`docs/core/WORKFLOWS.md`](docs/core/WORKFLOWS.md)
- Step-by-step guides for frequent tasks
- Adding features, creating puzzles, generating maps

### 2. Use MCP Tools

**Available MCP servers in `tools/`:**

- **`c_compiler_mcp`**: Compile and run C code (MANDATORY for puzzle validation)
  - Tool: `compile_and_run_c(source_code, input_data)`
  - See [`docs/ai/mcp-servers.md`](docs/ai/mcp-servers.md)
- **`generate_map`** (future): Procedural map generation
  - Current: Use `tools/generate_map.py` via bash

---

## The Four Core Mandates

**From [`docs/core/CONSTRAINTS.md`](docs/core/CONSTRAINTS.md):**

1. **Backend Authority**: NEVER write game logic in Svelte/JS. Physics, XP, and inventory live in Rust. Svelte is for rendering only.

2. **Verify C Code**: When writing a C puzzle or solution, YOU MUST use the `compile_and_run_c` tool to verify it runs and produces the expected output. Do not guess.

3. **Procedural Assets**: Do not try to generate SVG art. Use the `generate_map.py` tool to configure Tiled maps.

4. **No Magic**: Game mechanics must map to real C concepts. (e.g., "Malloc" creates land, "Free" removes it).

---

## Project Structure

```
C-warrior/
├── docs/
│   ├── core/               # Shared AI documentation (START HERE)
│   ├── ai/                 # AI assistant guides
│   ├── architecture/       # Technical design
│   ├── game_design/        # Mechanics and metaphors
│   └── curriculum/         # Educational progression
├── src/                    # Rust backend (game logic)
├── src-ui/                 # Svelte frontend (UI only)
├── src/assets/levels.json  # Level definitions (SOURCE OF TRUTH)
└── tools/                  # MCP servers and scripts
```

---

## Common Tasks

| Task | Start Here | Tools |
|------|------------|-------|
| **Add game feature** | `docs/core/WORKFLOWS.md` #1 | None |
| **Create C puzzle** | `docs/core/WORKFLOWS.md` #2 | `compile_and_run_c` (REQUIRED) |
| **Generate map** | `docs/core/WORKFLOWS.md` #3 | `generate_map.py` |
| **Fix bug** | `docs/architecture/system.md` | Depends on issue |
| **Understand architecture** | `docs/architecture/system.md` | None |

---

## Technology Stack

**From [`docs/core/CONSTRAINTS.md`](docs/core/CONSTRAINTS.md) - Fixed, no alternatives:**

- **Backend**: Rust 2021, Axum, Diesel (SQLite), Tokio
- **Frontend**: Svelte 5 (Runes), TailwindCSS, TypeScript
- **Bridge**: Tauri 2.0 (Commands/Events)
- **Assets**: Tiled maps, procedural generation

---

## Solo Developer Context

**From [`docs/core/CONSTRAINTS.md`](docs/core/CONSTRAINTS.md):**

- Optimize for **fast, focused iteration**, not team workflows
- Avoid proposing heavy process (RFCs, multi-person reviews, large documentation suites)
- Keep documentation **short and directly useful** for implementation
- Default to **concise answers and minimal boilerplate**

---

## Response Style

- Be **concise** by default; avoid long explanations unless requested
- Provide **direct, actionable answers**
- **Don't re-explain** the overall architecture unless asked
- **Don't create verbose documentation** "for the team"

---

## When in Doubt

1. **Check constraints**: [`docs/core/CONSTRAINTS.md`](docs/core/CONSTRAINTS.md)
2. **Find your domain**: [`docs/core/DOMAINS.md`](docs/core/DOMAINS.md)
3. **Follow workflows**: [`docs/core/WORKFLOWS.md`](docs/core/WORKFLOWS.md)
4. **Use MCP tools**: For C compilation and code execution

---

## Full Documentation Index

**Entry Point**: [`docs/ai/README.md`](docs/ai/README.md)

**Core** (Read these first):
- [`docs/core/CONSTRAINTS.md`](docs/core/CONSTRAINTS.md) - Critical rules
- [`docs/core/DOMAINS.md`](docs/core/DOMAINS.md) - Task mapping
- [`docs/core/WORKFLOWS.md`](docs/core/WORKFLOWS.md) - Step-by-step guides

**Technical**:
- `docs/architecture/system.md` - System design
- `docs/game_design/mechanics.md` - Game mechanics
- `docs/curriculum/progression.md` - Educational theory
- `src/assets/levels.json` - Level definitions (SOURCE OF TRUTH)

**AI Guides**:
- [`docs/ai/mcp-servers.md`](docs/ai/mcp-servers.md) - MCP tools

**Cross-Agent**:
- `AGENTS.md` - Guidelines for all AI agents
- `CLAUDE.md` - Claude Code instructions
- `GEMINI.md` - Gemini instructions
