name: "c-compiler-jail"

mode: ONCE
hostname: "sandbox"
cwd: "/sandbox"

time_limit: 5
rlimit_as: 128
rlimit_cpu: 5
rlimit_fsize: 1
rlimit_nofile: 32
max_cpus: 1

clone_newnet: true
clone_newuser: true
clone_newns: true
clone_newpid: true
clone_newipc: true

mount {
    src: "/usr"
    dst: "/usr"
    is_bind: true
    rw: false
}

mount {
    src: "/lib"
    dst: "/lib"
    is_bind: true
    rw: false
}

mount {
    dst: "/tmp"
    fstype: "tmpfs"
    rw: true
    is_bind: false
}

mount {
    dst: "/sandbox"
    fstype: "tmpfs"
    rw: true
    is_bind: false
}

seccomp_string: "ALLOW { read, write, open, close, fstat, mmap, mprotect, munmap, brk, access, execve, arch_prctl, exit_group, uname, readlink, getuid, getgid, geteuid, getegid, getcwd, dup2, fcntl, ioctl, set_tid_address, set_robust_list, prlimit64, getrandom, rt_sigaction, rt_sigprocmask, sigaltstack, futex, clone, wait4, exit, pipe2, lseek, stat, openat, faccessat, newfstatat, getdents64, statx, madvise, rseq, pread64, clock_gettime }"
